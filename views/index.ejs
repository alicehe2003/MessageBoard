<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
</head>
<body>
    <h1><%= title %></h1>

    <ul>
        <% messages.forEach(function(message, index) { %>
            <li>
                <strong><%= message.user %>:</strong> <%= message.text %> 
                <br>
                <em>Added on: <%= message.added.toLocaleString() %></em>
                <br>
                <!-- Ensure the index is properly used here -->
                <a href="/message/<%= index %>">Open</a>
            </li>
        <% }) %>
    </ul>

    <a href="/new">Add a new message</a>
</body>
</html>
